version: '3.9'
name: tp1
services:
  client:
    container_name: client
    image: client:latest
    entrypoint: python3 /main.py
    environment:
      - PYTHONUNBUFFERED=1
    depends_on:
      - server
  server:
    container_name: server
    image: server:latest
    entrypoint: python3 /main.py
    restart: on-failure
    external_links:
      - rabbitmq
    environment:
      - PYTHONUNBUFFERED=1
    depends_on:
      - initial_column_cleaner
  
  initial_column_cleaner:
    container_name: initial_column_cleaner
    image: initial_column_cleaner:latest
    entrypoint: python3 /main.py
    environment:
      - PYTHONUNBUFFERED=1
    depends_on:
      - filter_by_three_stopovers
  
  filter_by_three_stopovers:
    container_name: filter_by_three_stopovers
    image: filter_by_three_stopovers:latest
    entrypoint: python3 /main.py
    environment:
      - PYTHONUNBUFFERED=1
